/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){function a(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r(this,"dateFrom",void 0),r(this,"dateStart",void 0),r(this,"dateEnd",void 0),r(this,"coreFormat","YYYY/MM/DD"),r(this,"message",{default:"Function getMessage must have one parameter.",jquery:"Require: https://jquery.com.",datepicker:"Require: https://jqueryui.com/datepicker",momentjs:"Require: https://momentjs.com.",noEl:"Element %str% does not exist.",isNotStr:"Is not a string."}),"object"!==e(t)&&(t=Object.create(null)),"object"!==e(t.from)&&(t.from=Object.create(null)),"object"!==e(t.to)&&(t.to=Object.create(null)),this.disableDaysFormat=void 0!==t.disableDaysFormat?t.disableDaysFormat:"YYYY-MM-DD",this.disableDays=void 0!==t.disableDays?t.disableDays:[],this.inputFrom=t.from.input,this.inputTo=t.to.input,this.fromDaysDiff=void 0!==t.from.daysDiff?t.from.daysDiff:0,this.toDaysDiff=void 0!==t.to.daysDiff?t.to.daysDiff:0,this.datepicker=t.datepicker,this.datepickerFrom=t.from.datepicker,this.datepickerTo=t.to.datepicker}var n,i;return n=a,(i=[{key:"init",value:function(){var e=this,t=e.getDatepicker(),r=e.getInputFrom(),a=e.getInputTo();e.checkDependencies();var n={beforeShowDay:function(t){return[e.compareDisable(t)]},onSelect:function(t,r){var n=e.getFromDaysDiff(),i=e.createDate(r.selectedYear,r.selectedMonth,r.selectedDay);e.setDateFrom(e.calcDaysDiff(i,n)),e.clearInput(a)}},i={beforeShowDay:function(t){var r=e.getDateFrom(),a=!0;return e.setDateStart(r),r&&e.setDateEnd(e.breakDay()),r&&null!==e.getDateEnd()&&(a=t<e.getDateEnd()),r||(a=e.compareDisable(t)),t<r&&(a=!1),[a]}};e.clearInput(r),e.clearInput(a),n=e.pushObj(n,t),i=e.pushObj(i,t),n=e.pushObj(n,e.getDatepickerFrom()),i=e.pushObj(i,e.getDatepickerTo()),r.datepicker(n),a.datepicker(i)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isExistNode",value:function(e){if(!this.isString(e))throw new Error(this.getMessage("isNotStr"));var t=$(e);if(0!==t.length)return t;throw new Error(this.getMessage("noEl",e))}},{key:"checkDependencies",value:function(){if("function"!=typeof $)throw new Error(this.getMessage("jquery"));if("function"!=typeof jQuery)throw new Error(this.getMessage("jquery"));if("object"!==e($.datepicker))throw new Error(this.getMessage("datepicker"));if("function"!=typeof moment)throw new Error(this.getMessage("momentjs"))}},{key:"compareDisable",value:function(e){var t=this.getCoreFormatedDate(e);return-1==this.formatedDisableDays().indexOf(t)}},{key:"pushObj",value:function(e,t){for(var r in t)e[r]=t[r];return e}},{key:"breakDay",value:function(){var e=this.formatedDisableDays(),t=new Date(this.getDateStart());for(var r in e){var a=new Date(e[r]);if(t<=a)return a.setDate(a.getDate()+this.getToDaysDiff()),a}return!1}},{key:"formatedDisableDays",value:function(){var e=this.getDisableDays(),t=[];for(var r in e)t[r]=this.convertDisableDaysToCoreFormat(e[r]);return t.sort()}},{key:"clearInput",value:function(e){e.val("")}},{key:"getCoreFormatedDate",value:function(e){return moment(e).format(this.getCoreFormat())}},{key:"convertDisableDaysToCoreFormat",value:function(e){return moment(e,this.getDisableDaysFormat()).format(this.getCoreFormat())}},{key:"calcDaysDiff",value:function(e,t){return e.setDate(e.getDate()+t)}},{key:"createDate",value:function(e,t,r){return new Date(e,t,r)}},{key:"getDateStart",value:function(){return this.dateStart}},{key:"getDateEnd",value:function(){return this.dateEnd}},{key:"getDateFrom",value:function(){return this.dateFrom}},{key:"getDisableDays",value:function(){return this.disableDays}},{key:"getDisableDaysFormat",value:function(){return this.disableDaysFormat}},{key:"getInputFrom",value:function(){return this.isExistNode(this.inputFrom)}},{key:"getInputTo",value:function(){return this.isExistNode(this.inputTo)}},{key:"getFromDaysDiff",value:function(){return this.fromDaysDiff}},{key:"getToDaysDiff",value:function(){return this.toDaysDiff}},{key:"getDatepicker",value:function(){return this.datepicker}},{key:"getDatepickerFrom",value:function(){return this.datepickerFrom}},{key:"getDatepickerTo",value:function(){return this.datepickerTo}},{key:"getCoreFormat",value:function(){return this.coreFormat}},{key:"getMessage",value:function(e,t){var r=this.message[e],a=this.message[e].split("%str%");return 2===a.length?t?a[0]+t+a[1]:a[0].trim()+a[1]:r}},{key:"setDateStart",value:function(e){this.dateStart=e||new Date}},{key:"setDateEnd",value:function(e){this.dateEnd=e||null}},{key:"setDateFrom",value:function(e){this.dateFrom=e||null}}])&&t(n.prototype,i),a}();jQuery(document).ready((function(e){return new a(InterconnectedInputsOptions).init()}))}();