/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.d=function(t,r){for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n=function(){function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"dateFrom",void 0),a(this,"dateStart",void 0),a(this,"dateEnd",void 0),a(this,"coreFormat","YYYY/MM/DD"),a(this,"message",{default:"Function getMessage must have one parameter.",jquery:"Require: https://jquery.com.",datepicker:"Require: https://jqueryui.com/datepicker",momentjs:"Require: https://momentjs.com.",noEl:"Element %str% does not exist.",isNotStr:"Is not a string."}),"object"!==t(r)&&(r=Object.create(null)),"object"!==t(r.from)&&(r.from=Object.create(null)),"object"!==t(r.to)&&(r.to=Object.create(null)),this.disableDaysFormat=void 0!==r.disableDaysFormat?r.disableDaysFormat:"YYYY-MM-DD",this.disableDays=void 0!==r.disableDays?r.disableDays:[],this.inputFrom=r.from.input,this.inputTo=r.to.input,this.fromDaysDiff=void 0!==r.from.daysDiff?r.from.daysDiff:0,this.toDaysDiff=void 0!==r.to.daysDiff?r.to.daysDiff:0,this.datepicker=r.datepicker,this.datepickerFrom=r.from.datepicker,this.datepickerTo=r.to.datepicker}var n,o;return n=e,(o=[{key:"init",value:function(){var e=this,t=e.getDatepicker(),r=e.getInputFrom(),a=e.getInputTo();e.checkDependencies();var n={beforeShowDay:function(t){return[e.compareDisable(t)]},onSelect:function(t,r){var n=e.getFromDaysDiff(),o=e.createDate(r.selectedYear,r.selectedMonth,r.selectedDay);e.setDateFrom(e.calcDaysDiff(o,n)),e.clearInput(a)}},o={beforeShowDay:function(t){var r=e.getDateFrom(),a=!0;return e.setDateStart(r),r&&e.setDateEnd(e.breakDay()),r&&null!==e.getDateEnd()&&(a=t<e.getDateEnd()),r||(a=e.compareDisable(t)),t<r&&(a=!1),[a]}};e.clearInput(r),e.clearInput(a),n=e.pushObj(n,t),o=e.pushObj(o,t),n=e.pushObj(n,e.getDatepickerFrom()),o=e.pushObj(o,e.getDatepickerTo()),r.datepicker(n),a.datepicker(o)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isExistNode",value:function(e){if(!this.isString(e))throw new Error(this.getMessage("isNotStr"));var t=$(e);if(0!==t.length)return t;throw new Error(this.getMessage("noEl",e))}},{key:"checkDependencies",value:function(){if("function"!=typeof $)throw new Error(this.getMessage("jquery"));if("function"!=typeof jQuery)throw new Error(this.getMessage("jquery"));if("object"!==t($.datepicker))throw new Error(this.getMessage("datepicker"));if("function"!=typeof moment)throw new Error(this.getMessage("momentjs"))}},{key:"compareDisable",value:function(e){var t=this.getCoreFormatedDate(e);return-1==this.formatedDisableDays().indexOf(t)}},{key:"pushObj",value:function(e,t){for(var r in t)e[r]=t[r];return e}},{key:"breakDay",value:function(){var e=this.formatedDisableDays(),t=new Date(this.getDateStart());for(var r in e){var a=new Date(e[r]);if(t<=a)return a.setDate(a.getDate()+this.getToDaysDiff()),a}return!1}},{key:"formatedDisableDays",value:function(){var e=this.getDisableDays(),t=[];for(var r in e)t[r]=this.convertDisableDaysToCoreFormat(e[r]);return t.sort()}},{key:"clearInput",value:function(e){e.val("")}},{key:"getCoreFormatedDate",value:function(e){return moment(e).format(this.getCoreFormat())}},{key:"convertDisableDaysToCoreFormat",value:function(e){return moment(e,this.getDisableDaysFormat()).format(this.getCoreFormat())}},{key:"calcDaysDiff",value:function(e,t){return e.setDate(e.getDate()+t)}},{key:"createDate",value:function(e,t,r){return new Date(e,t,r)}},{key:"getDateStart",value:function(){return this.dateStart}},{key:"getDateEnd",value:function(){return this.dateEnd}},{key:"getDateFrom",value:function(){return this.dateFrom}},{key:"getDisableDays",value:function(){return this.disableDays}},{key:"getDisableDaysFormat",value:function(){return this.disableDaysFormat}},{key:"getInputFrom",value:function(){return this.isExistNode(this.inputFrom)}},{key:"getInputTo",value:function(){return this.isExistNode(this.inputTo)}},{key:"getFromDaysDiff",value:function(){return this.fromDaysDiff}},{key:"getToDaysDiff",value:function(){return this.toDaysDiff}},{key:"getDatepicker",value:function(){return this.datepicker}},{key:"getDatepickerFrom",value:function(){return this.datepickerFrom}},{key:"getDatepickerTo",value:function(){return this.datepickerTo}},{key:"getCoreFormat",value:function(){return this.coreFormat}},{key:"getMessage",value:function(e,t){var r=this.message[e],a=this.message[e].split("%str%");return 2===a.length?t?a[0]+t+a[1]:a[0].trim()+a[1]:r}},{key:"setDateStart",value:function(e){this.dateStart=e||new Date}},{key:"setDateEnd",value:function(e){this.dateEnd=e||null}},{key:"setDateFrom",value:function(e){this.dateFrom=e||null}}])&&r(n.prototype,o),e}();jQuery(document).ready((function(e){return new n(InterconnectedInputsOptions).init()}))}();